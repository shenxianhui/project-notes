(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["view-game-snake-Snake"],{"80a6":function(t,i,e){"use strict";e("9a37")},"842e":function(t,i,e){"use strict";e.r(i);var s=function(){var t=this,i=t._self._c;return i("div",{ref:"snake",staticClass:"snake"},[i("div",{ref:"map",staticClass:"map"})])},n=[],a=(e("d81d"),e("99af"),e("14d9"),e("e9c4"),e("d3b7"),e("159b"),e("fa7d")),o=null,r={name:"Snake",components:{},props:{},data:function(){return{keyNumber:0,snake:[],snakeList:[],snakeParts:{width:20,height:20},initialPosition:{left:40,top:0},food:null,foodPosition:{left:0,top:0}}},computed:{},watch:{},created:function(){},mounted:function(){this.initGame(),window.addEventListener("keydown",this.keyboard),window.addEventListener("resize",Object(a["b"])(this.initGame))},destroyed:function(){o&&(clearInterval(o),o=null),window.removeEventListener("keydown",this.keyboard),window.removeEventListener("resize",this.initGame)},methods:{initGame:function(){o&&(clearInterval(o),o=null),this.initialPosition={left:40,top:0},this.snake=this.snakeList=[],this.$refs.map.innerHTML="",this.setMap(),this.createSnake(),this.createFood()},setMap:function(){var t=this.$refs.map,i=this.snakeParts.width,e=this.snakeParts.height,s=(t.clientWidth-Math.floor(t.clientWidth/i)*i)/2+"px",n=(t.clientHeight-Math.floor(t.clientHeight/e)*e)/2+"px";this.$refs.snake.style.padding=n+" "+s},createSnake:function(){for(var t=0;t<3;t++){var i=document.createElement("span");i.style.position="absolute",i.style.top="0px",i.style.left=this.initialPosition.left-t*this.snakeParts.width+"px",i.style.display="inline-block",i.style.width=this.snakeParts.width+"px",i.style.height=this.snakeParts.height+"px",i.style.backgroundColor="#".concat(3*t).concat(3*t).concat(3*t),this.$refs.map.appendChild(i),this.snake.push(i)}},snakeMove:function(t){var i=this;if(JSON.stringify(this.initialPosition)===JSON.stringify(this.foodPosition)){if(!this.food)return;this.snake.push(this.food),this.$refs.map.appendChild(this.food),this.food=null,this.createFood()}this.snakeList=[];for(var e=this.snake.length-1;e>0;e--){this.snake[e].style.left=this.snake[e-1].offsetLeft+"px",this.snake[e].style.top=this.snake[e-1].offsetTop+"px";var s={left:this.snake[e].offsetLeft,top:this.snake[e].offsetTop};this.snakeList.push(s)}this.snakeList.push(this.initialPosition);var n=this.$refs.map.clientWidth,a=this.$refs.map.clientHeight;switch(this.keyNumber){case 37:if(0===this.initialPosition.left)return t&&alert("游戏结束"),this.keyNumber=0,void this.initGame();this.initialPosition.left-=this.snakeParts.width,this.snake[0].style.left=this.initialPosition.left+"px";break;case 38:if(0===this.initialPosition.top)return t&&alert("游戏结束"),this.keyNumber=0,void this.initGame();this.initialPosition.top-=this.snakeParts.height,this.snake[0].style.top=this.initialPosition.top+"px";break;case 39:if(this.initialPosition.left+this.snakeParts.width>=n)return t&&alert("游戏结束"),this.keyNumber=0,void this.initGame();this.initialPosition.left+=this.snakeParts.width,this.snake[0].style.left=this.initialPosition.left+"px";break;case 40:if(this.initialPosition.top+this.snakeParts.height>=a)return t&&alert("游戏结束"),this.keyNumber=0,void this.initGame();this.initialPosition.top+=this.snakeParts.height,this.snake[0].style.top=this.initialPosition.top+"px";break}var o=!1;this.snakeList.forEach((function(e){if(JSON.stringify(e)===JSON.stringify(i.initialPosition)){if(o)return t&&alert("游戏结束"),i.keyNumber=0,void i.initGame();o=!0}}))},createFood:function(){for(var t=this.snakeParts.width,i=this.snakeParts.height,e=Math.floor(Math.random()*(this.$refs.map.offsetWidth-t)/t)*t,s=Math.floor(Math.random()*(this.$refs.map.offsetHeight-i)/i)*i,n=document.createElement("span"),a="#",o=0;o<6;o++){var r=Math.floor(10*Math.random());a+=r}n.style.position="absolute",n.style.left=e+"px",n.style.top=s+"px",n.style.display="inline-block",n.style.width=this.snakeParts.width+"px",n.style.height=this.snakeParts.height+"px",n.style.backgroundColor=a,this.foodPosition.left=e,this.foodPosition.top=s,this.food=n,this.$refs.map.appendChild(n)},keyboard:function(t){var i=this;if(37===t.keyCode||38===t.keyCode||39===t.keyCode||40===t.keyCode){var e=this.keyNumber;37===e&&39===t.keyCode||38===e&&40===t.keyCode||39===e&&37===t.keyCode||40===e&&38===t.keyCode||(this.keyNumber=t.keyCode,this.keyNumber!==e&&(o&&(clearInterval(o),o=null),this.snakeMove(!1),o=setInterval((function(){i.snakeMove(!0)}),100)))}}}},h=r,l=(e("80a6"),e("2877")),f=Object(l["a"])(h,s,n,!1,null,"76cc221a",null);i["default"]=f.exports},"9a37":function(t,i,e){},e9c4:function(t,i,e){var s=e("23e7"),n=e("d066"),a=e("2ba4"),o=e("c65b"),r=e("e330"),h=e("d039"),l=e("e8b5"),f=e("1626"),d=e("861d"),u=e("d9b5"),k=e("f36a"),c=e("04f8"),p=n("JSON","stringify"),y=r(/./.exec),m=r("".charAt),v=r("".charCodeAt),P=r("".replace),b=r(1..toString),w=/[\uD800-\uDFFF]/g,g=/^[\uD800-\uDBFF]$/,x=/^[\uDC00-\uDFFF]$/,C=!c||h((function(){var t=n("Symbol")();return"[null]"!=p([t])||"{}"!=p({a:t})||"{}"!=p(Object(t))})),N=h((function(){return'"\\udf06\\ud834"'!==p("\udf06\ud834")||'"\\udead"'!==p("\udead")})),M=function(t,i){var e=k(arguments),s=i;if((d(i)||void 0!==t)&&!u(t))return l(i)||(i=function(t,i){if(f(s)&&(i=o(s,this,t,i)),!u(i))return i}),e[1]=i,a(p,null,e)},L=function(t,i,e){var s=m(e,i-1),n=m(e,i+1);return y(g,t)&&!y(x,n)||y(x,t)&&!y(g,s)?"\\u"+b(v(t,0),16):t};p&&s({target:"JSON",stat:!0,arity:3,forced:C||N},{stringify:function(t,i,e){var s=k(arguments),n=a(C?M:p,null,s);return N&&"string"==typeof n?P(n,w,L):n}})}}]);