(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["view-three-water-works-sgs~view-three-water-works-zy"],{"0556":function(e,t,r){"use strict";r.r(t);r("d3b7"),r("159b"),r("4fad");var a=r("5a89");t["default"]=function(e){return{init:function(){this.create(16777215,5),this.setPosition(1e4,1e4,-1e4),this.setShadowCamera({near:1,far:400,left:-50,right:-50,top:20,bottom:-50}),this.setShadowMapSize({width:1024,height:1024})},create:function(t,r){e.directionalLight=new a["s"](t,r),e.scene.add(e.directionalLight)},setShadowCamera:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(e.directionalLight.shadow,t)},setShadowMapSize:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.entries(t).forEach((function(t){e.directionalLight.shadow.mapSize[t[0]]=t[1]}))},setPosition:function(t,r,a){e.directionalLight.position.set(t,r,a)}}}},"0a30":function(e,t,r){"use strict";r.r(t);var a=r("34ad");t["default"]=function(e){return{init:function(){this.create()},create:function(t){e.gltfLoader=new a["a"](t)},load:function(t,r,a,n){e.gltfLoader.load(t,r,a,n)}}}},"0c21":function(e,t,r){"use strict";r.r(t);var a=r("5a89");t["default"]=function(e){return{init:function(){this.create()},create:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.clock=new a["n"](t)}}}},"16d6":function(e,t,r){"use strict";r.r(t);var a=r("aea1");t["default"]=function(e){return{createObject:function(t){e.css2DObject=new a["a"](t)},setObjectPosition:function(t,r,a){e.css2DObject.position.set(t,r,a)},createRenderer:function(){e.css2DRenderer=new a["b"],e.css2DRenderer.setSize(e.container.clientWidth,e.container.clientHeight),e.css2DRenderer.domElement.id="label-renderer",e.css2DRenderer.domElement.style.position="absolute",e.css2DRenderer.domElement.style.top="0px",e.container.appendChild(e.css2DRenderer.domElement)}}}},"3f01":function(e,t,r){"use strict";r.r(t);var a=r("5a89");t["default"]=function(e){return{init:function(){var t=e.container,r=t.clientWidth,a=t.clientHeight,n=r/a;this.create(75,n,1,1e5),this.setPosition(-5e3,5e3,-5e3),this.lookAt(e.scene.position)},create:function(t,r,n,i){e.camera=new a["sb"](t,r,n,i)},setPosition:function(t,r,a){e.camera.position.set(t,r,a)},lookAt:function(t){e.camera.lookAt(t)}}}},4035:function(e,t,r){var a={"./ambient-light.js":"c2e9","./animate.js":"ae44","./clock.js":"0c21","./collada-loader.js":"d8eb","./css2d-renderer.js":"16d6","./directional-light.js":"0556","./draco-loader.js":"b2f8","./gltf-loader.js":"0a30","./helper.js":"61dd","./index.js":"558f","./orbit-controls.js":"68c8","./perspective-camera.js":"3f01","./point-light.js":"55f4","./scene.js":"eb36","./stats.js":"d21f","./vector3.js":"7b69","./webgl-renderer.js":"9bc6"};function n(e){var t=i(e);return r(t)}function i(e){if(!r.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}n.keys=function(){return Object.keys(a)},n.resolve=i,e.exports=n,n.id="4035"},"558f":function(e,t,r){"use strict";r.r(t);var a=r("d4ec"),n=r("bee2"),i=r("262e"),s=r("2caf"),o=(r("d3b7"),r("159b"),r("ddb0"),r("ac1f"),r("5319"),r("faa1")),c=r.n(o),l=r("fa7d"),d=r("4035"),u=function(e){Object(i["a"])(r,e);var t=Object(s["a"])(r);function r(e,n){var i;return Object(a["a"])(this,r),i=t.call(this),i.loadModules(),e&&i.initThree(e,n),i}return Object(n["a"])(r,[{key:"initThree",value:function(e,t){this.container=document.getElementById(e),this.Scene.init(),this.WebglRenderer.init(),this.Css2dRenderer.createRenderer(),this.PerspectiveCamera.init(),this.Clock.init(),this.OrbitControls.init(),this.PointLight.init(),this.AmbientLight.init(),this.DirectionalLight.init(),this.GltfLoader.init(),this.ColladaLoader.init(),this.DracoLoader.init(),t&&this.Stats.init(t),this.Animate.init(),this.Helper.init(),this.container.appendChild(this.renderer.domElement)}},{key:"clearThree",value:function(){cancelAnimationFrame(this.animationFrame),this.container=null,this.statsContainer=null,this.stats=null,this.scene=null,this.renderer=null,this.clock=null,this.camera=null,this.axesHelper=null,this.gridHelper=null,this.controls=null,this.pointLight=null,this.ambientLight=null,this.directionalLight=null,this.vector3=null,this.dracoLoader=null,this.loader=null,this.animationFrame=null}},{key:"loadModules",value:function(){var e=this;d.keys().forEach((function(t){if("./index.js"!==t){var a=d(t).default,n=t.replace(/(\.\/)|(\.js)/g,""),i=Object(l["a"])(Object(l["c"])(n)),s={};s[i]=a(e),Object.assign(r.prototype,s)}}))}}]),r}(c.a);t["default"]=u},"55f4":function(e,t,r){"use strict";r.r(t);var a=r("5a89");t["default"]=function(e){return{init:function(){this.create(16777215),this.setPosition(-2e3,2e3,-2e3)},create:function(t,r,n,i){e.pointLight=new a["ub"](t,r,n,i),e.scene.add(e.pointLight)},setPosition:function(t,r,a){e.pointLight.position.set(t,r,a)}}}},"61dd":function(e,t,r){"use strict";r.r(t);var a=r("5a89");t["default"]=function(e){return{init:function(){this.createAxesHelper(35e3),this.createGridHelper(5e4,30,16776960,16777215),this.createDirectionalLightHelper(e.directionalLight,5),this.createPointLightHelper(e.pointLight),this.createCameraHelper(e.camera)},createAxesHelper:function(t){e.axesHelper=new a["d"](t),e.scene.add(e.axesHelper)},createGridHelper:function(t,r,n,i){e.gridHelper=new a["D"](t,r,n,i),e.scene.add(e.gridHelper)},createDirectionalLightHelper:function(t,r,n){e.directionalLightHelper=new a["t"](t,r,n),e.scene.add(e.directionalLightHelper)},createPointLightHelper:function(t,r,n){e.pointLightHelper=new a["vb"](t,r,n),e.scene.add(e.pointLightHelper)},createCameraHelper:function(t){e.cameratHelper=new a["k"](t),e.scene.add(e.cameratHelper)}}}},"68c8":function(e,t,r){"use strict";r.r(t);var a=r("4721");t["default"]=function(e){return{init:function(){this.create(e.camera,e.container)},create:function(t,r){e.controls=new a["a"](t,r)},setZoom:function(t,r){t&&(e.controls.minZoom=t),r&&(e.controls.maxZoom=r)},setPolarAngle:function(t,r){t&&(e.controls.minPolarAngle=t),r&&(e.controls.maxPolarAngle=r)}}}},"7b69":function(e,t,r){"use strict";r.r(t);var a=r("5a89");t["default"]=function(e){return{init:function(){this.create()},create:function(){e.vector3=new a["cc"]}}}},"802e":function(e,t,r){"use strict";r("e13c")},"9bc6":function(e,t,r){"use strict";r.r(t);r("d3b7"),r("159b"),r("4fad");var a=r("5a89");t["default"]=function(e){return{init:function(){this.create({antialias:!0}),this.setSize(),this.setShadowMap({type:a["qb"]})},create:function(t){e.renderer=new a["gc"](t)},setSize:function(t,r){e.renderer.setSize(t||e.container.clientWidth,r||e.container.clientHeight)},setShadowMap:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.entries(t).forEach((function(t){e.renderer.shadowMap[t[0]]=t[1]}))}}}},ae44:function(e,t,r){"use strict";r.r(t),t["default"]=function(e){return{init:function(){this.animate()},animate:function(){e.animationFrame=requestAnimationFrame(this.animate.bind(this)),this.render()},render:function(){e.stats&&e.stats.update(),e.renderer.render(e.scene,e.camera),e.css2DRenderer&&e.css2DRenderer.render(e.scene,e.camera)}}}},b2f8:function(e,t,r){"use strict";r.r(t);var a=r("0ca5");t["default"]=function(e){return{init:function(){this.create()},create:function(){e.dracoLoader=new a["a"]},setDecoderPath:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/utils/gltf/";e.dracoLoader.setDecoderPath(t)}}}},c2e9:function(e,t,r){"use strict";r.r(t);var a=r("5a89");t["default"]=function(e){return{init:function(){this.create(16777215)},create:function(t,r){e.ambientLight=new a["b"](t,r),e.scene.add(e.ambientLight)}}}},d21f:function(e,t,r){"use strict";r.r(t);r("d3b7"),r("159b"),r("4fad");var a=function(){var e=0,t=document.createElement("div");function r(e){return t.appendChild(e.dom),e}function n(r){for(var a=0;a<t.children.length;a++)t.children[a].style.display=a===r?"block":"none";e=r}t.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",t.addEventListener("click",(function(r){r.preventDefault(),n(++e%t.children.length)}),!1);var i=(performance||Date).now(),s=i,o=0,c=r(new a.Panel("FPS","#0ff","#002")),l=r(new a.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var d=r(new a.Panel("MB","#f08","#201"));return n(0),{REVISION:16,dom:t,addPanel:r,showPanel:n,begin:function(){i=(performance||Date).now()},end:function(){o++;var e=(performance||Date).now();if(l.update(e-i,200),e>=s+1e3&&(c.update(1e3*o/(e-s),100),s=e,o=0,d)){var t=performance.memory;d.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){i=this.end()},domElement:t,setMode:n}};a.Panel=function(e,t,r){var a=1/0,n=0,i=Math.round,s=i(window.devicePixelRatio||1),o=80*s,c=48*s,l=3*s,d=2*s,u=3*s,f=15*s,h=74*s,p=30*s,m=document.createElement("canvas");m.width=o,m.height=c,m.style.cssText="width:80px;height:48px";var v=m.getContext("2d");return v.font="bold "+9*s+"px Helvetica,Arial,sans-serif",v.textBaseline="top",v.fillStyle=r,v.fillRect(0,0,o,c),v.fillStyle=t,v.fillText(e,l,d),v.fillRect(u,f,h,p),v.fillStyle=r,v.globalAlpha=.9,v.fillRect(u,f,h,p),{dom:m,update:function(c,b){a=Math.min(a,c),n=Math.max(n,c),v.fillStyle=r,v.globalAlpha=1,v.fillRect(0,0,o,f),v.fillStyle=t,v.fillText(i(c)+" "+e+" ("+i(a)+"-"+i(n)+")",l,d),v.drawImage(m,u+s,f,h-s,p,u,f,h-s,p),v.fillRect(u+h-s,f,s,p),v.fillStyle=r,v.globalAlpha=.9,v.fillRect(u+h-s,f,s,i((1-c/b)*p))}}};var n=a;t["default"]=function(e){return{init:function(t){this.create(t),e.statsContainer.appendChild(e.stats.domElement),this.setStyle()},create:function(t){e.statsContainer=document.getElementById(t),e.stats=new n},showPanel:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;e.stats.showPanel(t)},setStyle:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{position:"absolute"};Object.entries(t).forEach((function(t){e.stats.domElement.style[t[0]]=t[1]}))}}}},d8eb:function(e,t,r){"use strict";r.r(t);var a=r("5a89"),n=function(e){a["T"].call(this,e)};n.prototype=Object.assign(Object.create(a["T"].prototype),{constructor:n,load:function(e,t,r,n){var i=this,s=new a["Tb"],o=new a["y"](this.manager);return o.setResponseType("arraybuffer"),o.setPath(this.path),o.load(e,(function(e){s.image=i.parse(e),s.needsUpdate=!0,void 0!==t&&t(s)}),r,n),s},parse:function(e){function t(e){switch(e.image_type){case u:case p:(e.colormap_length>256||24!==e.colormap_size||1!==e.colormap_type)&&console.error("THREE.TGALoader: Invalid type colormap data for indexed type.");break;case f:case h:case m:case v:e.colormap_type&&console.error("THREE.TGALoader: Invalid type colormap data for colormap type.");break;case d:console.error("THREE.TGALoader: No data.");default:console.error('THREE.TGALoader: Invalid type "%s".',e.image_type)}(e.width<=0||e.height<=0)&&console.error("THREE.TGALoader: Invalid image size."),8!==e.pixel_size&&16!==e.pixel_size&&24!==e.pixel_size&&32!==e.pixel_size&&console.error('THREE.TGALoader: Invalid pixel size "%s".',e.pixel_size)}function r(e,t,r,a,n){var i,s,o,c;if(s=r.pixel_size>>3,o=r.width*r.height*s,t&&(c=n.subarray(a,a+=r.colormap_length*(r.colormap_size>>3))),e){var l,d,u;i=new Uint8Array(o);var f=0,h=new Uint8Array(s);while(f<o)if(l=n[a++],d=1+(127&l),128&l){for(u=0;u<s;++u)h[u]=n[a++];for(u=0;u<d;++u)i.set(h,f+u*s);f+=s*d}else{for(d*=s,u=0;u<d;++u)i[f+u]=n[a++];f+=d}}else i=n.subarray(a,a+=t?r.width*r.height:o);return{pixel_data:i,palettes:c}}function a(e,t,r,a,n,i,s,o,c){var l,d,u,f=c,h=0,p=T.width;for(u=t;u!==a;u+=r)for(d=n;d!==s;d+=i,h++)l=o[h],e[4*(d+p*u)+3]=255,e[4*(d+p*u)+2]=f[3*l+0],e[4*(d+p*u)+1]=f[3*l+1],e[4*(d+p*u)+0]=f[3*l+2];return e}function n(e,t,r,a,n,i,s,o){var c,l,d,u=0,f=T.width;for(d=t;d!==a;d+=r)for(l=n;l!==s;l+=i,u+=2)c=o[u+0]+(o[u+1]<<8),e[4*(l+f*d)+0]=(31744&c)>>7,e[4*(l+f*d)+1]=(992&c)>>2,e[4*(l+f*d)+2]=(31&c)>>3,e[4*(l+f*d)+3]=32768&c?0:255;return e}function i(e,t,r,a,n,i,s,o){var c,l,d=0,u=T.width;for(l=t;l!==a;l+=r)for(c=n;c!==s;c+=i,d+=3)e[4*(c+u*l)+3]=255,e[4*(c+u*l)+2]=o[d+0],e[4*(c+u*l)+1]=o[d+1],e[4*(c+u*l)+0]=o[d+2];return e}function s(e,t,r,a,n,i,s,o){var c,l,d=0,u=T.width;for(l=t;l!==a;l+=r)for(c=n;c!==s;c+=i,d+=4)e[4*(c+u*l)+2]=o[d+0],e[4*(c+u*l)+1]=o[d+1],e[4*(c+u*l)+0]=o[d+2],e[4*(c+u*l)+3]=o[d+3];return e}function o(e,t,r,a,n,i,s,o){var c,l,d,u=0,f=T.width;for(d=t;d!==a;d+=r)for(l=n;l!==s;l+=i,u++)c=o[u],e[4*(l+f*d)+0]=c,e[4*(l+f*d)+1]=c,e[4*(l+f*d)+2]=c,e[4*(l+f*d)+3]=255;return e}function c(e,t,r,a,n,i,s,o){var c,l,d=0,u=T.width;for(l=t;l!==a;l+=r)for(c=n;c!==s;c+=i,d+=2)e[4*(c+u*l)+0]=o[d+0],e[4*(c+u*l)+1]=o[d+0],e[4*(c+u*l)+2]=o[d+0],e[4*(c+u*l)+3]=o[d+1];return e}function l(e,t,r,l,d){var u,f,h,p,m,v;switch((T.flags&b)>>g){default:case k:u=0,h=1,m=t,f=0,p=1,v=r;break;case y:u=0,h=1,m=t,f=r-1,p=-1,v=-1;break;case N:u=t-1,h=-1,m=-1,f=0,p=1,v=r;break;case w:u=t-1,h=-1,m=-1,f=r-1,p=-1,v=-1;break}if(_)switch(T.pixel_size){case 8:o(e,f,p,v,u,h,m,l);break;case 16:c(e,f,p,v,u,h,m,l);break;default:console.error("THREE.TGALoader: Format not supported.");break}else switch(T.pixel_size){case 8:a(e,f,p,v,u,h,m,l,d);break;case 16:n(e,f,p,v,u,h,m,l);break;case 24:i(e,f,p,v,u,h,m,l);break;case 32:s(e,f,p,v,u,h,m,l);break;default:console.error("THREE.TGALoader: Format not supported.");break}return e}var d=0,u=1,f=2,h=3,p=9,m=10,v=11,b=48,g=4,y=0,w=1,k=2,N=3;e.length<19&&console.error("THREE.TGALoader: Not enough data to contain header.");var x=new Uint8Array(e),A=0,T={id_length:x[A++],colormap_type:x[A++],image_type:x[A++],colormap_index:x[A++]|x[A++]<<8,colormap_length:x[A++]|x[A++]<<8,colormap_size:x[A++],origin:[x[A++]|x[A++]<<8,x[A++]|x[A++]<<8],width:x[A++]|x[A++]<<8,height:x[A++]|x[A++]<<8,pixel_size:x[A++],flags:x[A++]};t(T),T.id_length+A>e.length&&console.error("THREE.TGALoader: No data."),A+=T.id_length;var E=!1,C=!1,_=!1;switch(T.image_type){case p:E=!0,C=!0;break;case u:C=!0;break;case m:E=!0;break;case f:break;case v:E=!0,_=!0;break;case h:_=!0;break}var L="undefined"!==typeof OffscreenCanvas,j=L?new OffscreenCanvas(T.width,T.height):document.createElement("canvas");j.width=T.width,j.height=T.height;var R=j.getContext("2d"),O=R.createImageData(T.width,T.height),H=r(E,C,T,A,x);l(O.data,T.width,T.height,H.pixel_data,H.palettes);return R.putImageData(O,0,0),L?j.transferToImageBitmap():j}});var i=function(e){a["T"].call(this,e)};i.prototype=Object.assign(Object.create(a["T"].prototype),{constructor:i,load:function(e,t,r,n){var i=this,s=""===i.path?a["U"].extractUrlBase(e):i.path,o=new a["y"](i.manager);o.setPath(i.path),o.load(e,(function(e){t(i.parse(e,s))}),r,n)},options:{set convertUpAxis(e){console.warn("THREE.ColladaLoader: options.convertUpAxis() has been removed. Up axis is converted automatically.")}},parse:function(e,t){function r(e,t){for(var r=[],a=e.childNodes,n=0,i=a.length;n<i;n++){var s=a[n];s.nodeName===t&&r.push(s)}return r}function i(e){if(0===e.length)return[];for(var t=e.trim().split(/\s+/),r=new Array(t.length),a=0,n=t.length;a<n;a++)r[a]=t[a];return r}function s(e){if(0===e.length)return[];for(var t=e.trim().split(/\s+/),r=new Array(t.length),a=0,n=t.length;a<n;a++)r[a]=parseFloat(t[a]);return r}function o(e){if(0===e.length)return[];for(var t=e.trim().split(/\s+/),r=new Array(t.length),a=0,n=t.length;a<n;a++)r[a]=parseInt(t[a]);return r}function c(e){return e.substring(1)}function l(){return"three_default_"+Ct++}function d(e){return 0===Object.keys(e).length}function u(e){return{unit:f(r(e,"unit")[0]),upAxis:h(r(e,"up_axis")[0])}}function f(e){return void 0!==e&&!0===e.hasAttribute("meter")?parseFloat(e.getAttribute("meter")):1}function h(e){return void 0!==e?e.textContent:"Y_UP"}function p(e,t,a,n){var i=r(e,t)[0];if(void 0!==i)for(var s=r(i,a),o=0;o<s.length;o++)n(s[o])}function m(e,t){for(var r in e){var a=e[r];a.build=t(e[r])}}function v(e,t){return void 0!==e.build||(e.build=t(e)),e.build}function b(e){for(var t={sources:{},samplers:{},channels:{}},r=0,a=e.childNodes.length;r<a;r++){var n,i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"source":n=i.getAttribute("id"),t.sources[n]=xe(i);break;case"sampler":n=i.getAttribute("id"),t.samplers[n]=g(i);break;case"channel":n=i.getAttribute("target"),t.channels[n]=y(i);break;default:console.log(i)}}_t.animations[e.getAttribute("id")]=t}function g(e){for(var t={inputs:{}},r=0,a=e.childNodes.length;r<a;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"input":var i=c(n.getAttribute("source")),s=n.getAttribute("semantic");t.inputs[s]=i;break}}return t}function y(e){var t={},r=e.getAttribute("target"),a=r.split("/"),n=a.shift(),i=a.shift(),s=-1!==i.indexOf("("),o=-1!==i.indexOf(".");if(o)a=i.split("."),i=a.shift(),t.member=a.shift();else if(s){var l=i.split("(");i=l.shift();for(var d=0;d<l.length;d++)l[d]=parseInt(l[d].replace(/\)/,""));t.indices=l}return t.id=n,t.sid=i,t.arraySyntax=s,t.memberSyntax=o,t.sampler=c(e.getAttribute("source")),t}function w(e){var t=[],r=e.channels,a=e.samplers,n=e.sources;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i],o=a[s.sampler],c=o.inputs.INPUT,l=o.inputs.OUTPUT,d=n[c],u=n[l],f=N(s,d,u);C(f,t)}return t}function k(e){return v(_t.animations[e],w)}function N(e,t,r){var a,n,i,s,o,c,l=_t.nodes[e.id],d=ct(l.id),u=l.transforms[e.sid],f=l.matrix.clone().transpose(),h={};switch(u){case"matrix":for(i=0,s=t.array.length;i<s;i++)if(a=t.array[i],n=i*r.stride,void 0===h[a]&&(h[a]={}),!0===e.arraySyntax){var p=r.array[n],m=e.indices[0]+4*e.indices[1];h[a][m]=p}else for(o=0,c=r.stride;o<c;o++)h[a][o]=r.array[n+o];break;case"translate":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',u);break;case"rotate":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',u);break;case"scale":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',u);break}var v=x(h,f),b={name:d.uuid,keyframes:v};return b}function x(e,t){var r=[];for(var a in e)r.push({time:parseFloat(a),value:e[a]});r.sort(i);for(var n=0;n<16;n++)_(r,n,t.elements[n]);return r;function i(e,t){return e.time-t.time}}var A=new a["cc"],T=new a["cc"],E=new a["zb"];function C(e,t){for(var r=e.keyframes,n=e.name,i=[],s=[],o=[],c=[],l=0,d=r.length;l<d;l++){var u=r[l],f=u.time,h=u.value;$e.fromArray(h).transpose(),$e.decompose(A,E,T),i.push(f),s.push(A.x,A.y,A.z),o.push(E.x,E.y,E.z,E.w),c.push(T.x,T.y,T.z)}return s.length>0&&t.push(new a["dc"](n+".position",i,s)),o.length>0&&t.push(new a["Ab"](n+".quaternion",i,o)),c.length>0&&t.push(new a["dc"](n+".scale",i,c)),t}function _(e,t,r){var a,n,i,s=!0;for(n=0,i=e.length;n<i;n++)a=e[n],void 0===a.value[t]?a.value[t]=null:s=!1;if(!0===s)for(n=0,i=e.length;n<i;n++)a=e[n],a.value[t]=r;else L(e,t)}function L(e,t){for(var r,a,n=0,i=e.length;n<i;n++){var s=e[n];if(null===s.value[t]){if(r=j(e,n,t),a=R(e,n,t),null===r){s.value[t]=a.value[t];continue}if(null===a){s.value[t]=r.value[t];continue}O(s,r,a,t)}}}function j(e,t,r){while(t>=0){var a=e[t];if(null!==a.value[r])return a;t--}return null}function R(e,t,r){while(t<e.length){var a=e[t];if(null!==a.value[r])return a;t++}return null}function O(e,t,r,a){r.time-t.time!==0?e.value[a]=(e.time-t.time)*(r.value[a]-t.value[a])/(r.time-t.time)+t.value[a]:e.value[a]=t.value[a]}function H(e){for(var t={name:e.getAttribute("id")||"default",start:parseFloat(e.getAttribute("start")||0),end:parseFloat(e.getAttribute("end")||0),animations:[]},r=0,a=e.childNodes.length;r<a;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"instance_animation":t.animations.push(c(n.getAttribute("url")));break}}_t.clips[e.getAttribute("id")]=t}function I(e){for(var t=[],r=e.name,n=e.end-e.start||-1,i=e.animations,s=0,o=i.length;s<o;s++)for(var c=k(i[s]),l=0,d=c.length;l<d;l++)t.push(c[l]);return new a["c"](r,n,t)}function S(e){return v(_t.clips[e],I)}function z(e){for(var t={},r=0,a=e.childNodes.length;r<a;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"skin":t.id=c(n.getAttribute("source")),t.skin=M(n);break;case"morph":t.id=c(n.getAttribute("source")),console.warn("THREE.ColladaLoader: Morph target animation not supported yet.");break}}_t.controllers[e.getAttribute("id")]=t}function M(e){for(var t={sources:{}},r=0,a=e.childNodes.length;r<a;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"bind_shape_matrix":t.bindShapeMatrix=s(n.textContent);break;case"source":var i=n.getAttribute("id");t.sources[i]=xe(n);break;case"joints":t.joints=P(n);break;case"vertex_weights":t.vertexWeights=D(n);break}}return t}function P(e){for(var t={inputs:{}},r=0,a=e.childNodes.length;r<a;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"input":var i=n.getAttribute("semantic"),s=c(n.getAttribute("source"));t.inputs[i]=s;break}}return t}function D(e){for(var t={inputs:{}},r=0,a=e.childNodes.length;r<a;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"input":var i=n.getAttribute("semantic"),s=c(n.getAttribute("source")),l=parseInt(n.getAttribute("offset"));t.inputs[i]={id:s,offset:l};break;case"vcount":t.vcount=o(n.textContent);break;case"v":t.v=o(n.textContent);break}}return t}function q(e){var t={id:e.id},r=_t.geometries[t.id];return void 0!==e.skin&&(t.skin=U(e.skin),r.sources.skinIndices=t.skin.indices,r.sources.skinWeights=t.skin.weights),t}function U(e){var t,r,n,i=4,s={joints:[],indices:{array:[],stride:i},weights:{array:[],stride:i}},o=e.sources,c=e.vertexWeights,l=c.vcount,d=c.v,u=c.inputs.JOINT.offset,f=c.inputs.WEIGHT.offset,h=e.sources[e.joints.inputs.JOINT],p=e.sources[e.joints.inputs.INV_BIND_MATRIX],m=o[c.inputs.WEIGHT.id].array,v=0;for(t=0,n=l.length;t<n;t++){var b=l[t],g=[];for(r=0;r<b;r++){var y=d[v+u],w=d[v+f],k=m[w];g.push({index:y,weight:k}),v+=2}for(g.sort(T),r=0;r<i;r++){var N=g[r];void 0!==N?(s.indices.array.push(N.index),s.weights.array.push(N.weight)):(s.indices.array.push(0),s.weights.array.push(0))}}for(e.bindShapeMatrix?s.bindMatrix=(new a["Z"]).fromArray(e.bindShapeMatrix).transpose():s.bindMatrix=(new a["Z"]).identity(),t=0,n=h.array.length;t<n;t++){var x=h.array[t],A=(new a["Z"]).fromArray(p.array,t*p.stride).transpose();s.joints.push({name:x,boneInverse:A})}return s;function T(e,t){return t.weight-e.weight}}function F(e){return v(_t.controllers[e],q)}function G(e){var t={init_from:r(e,"init_from")[0].textContent};_t.images[e.getAttribute("id")]=t}function B(e){return void 0!==e.build?e.build:e.init_from}function J(e){var t=_t.images[e];return void 0!==t?v(t,B):(console.warn("THREE.ColladaLoader: Couldn't find image with ID:",e),null)}function V(e){for(var t={},r=0,a=e.childNodes.length;r<a;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"profile_COMMON":t.profile=Z(n);break}}_t.effects[e.getAttribute("id")]=t}function Z(e){for(var t={surfaces:{},samplers:{}},r=0,a=e.childNodes.length;r<a;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"newparam":W(n,t);break;case"technique":t.technique=$(n);break;case"extra":t.extra=ae(n);break}}return t}function W(e,t){for(var r=e.getAttribute("sid"),a=0,n=e.childNodes.length;a<n;a++){var i=e.childNodes[a];if(1===i.nodeType)switch(i.nodeName){case"surface":t.surfaces[r]=X(i);break;case"sampler2D":t.samplers[r]=Y(i);break}}}function X(e){for(var t={},r=0,a=e.childNodes.length;r<a;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"init_from":t.init_from=n.textContent;break}}return t}function Y(e){for(var t={},r=0,a=e.childNodes.length;r<a;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"source":t.source=n.textContent;break}}return t}function $(e){for(var t={},r=0,a=e.childNodes.length;r<a;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"constant":case"lambert":case"blinn":case"phong":t.type=n.nodeName,t.parameters=K(n);break}}return t}function K(e){for(var t={},r=0,a=e.childNodes.length;r<a;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"emission":case"diffuse":case"specular":case"bump":case"ambient":case"shininess":case"transparency":t[n.nodeName]=Q(n);break;case"transparent":t[n.nodeName]={opaque:n.getAttribute("opaque"),data:Q(n)};break}}return t}function Q(e){for(var t={},r=0,a=e.childNodes.length;r<a;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"color":t[n.nodeName]=s(n.textContent);break;case"float":t[n.nodeName]=parseFloat(n.textContent);break;case"texture":t[n.nodeName]={id:n.getAttribute("texture"),extra:ee(n)};break}}return t}function ee(e){for(var t={technique:{}},r=0,a=e.childNodes.length;r<a;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"extra":te(n,t);break}}return t}function te(e,t){for(var r=0,a=e.childNodes.length;r<a;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"technique":re(n,t);break}}}function re(e,t){for(var r=0,a=e.childNodes.length;r<a;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"repeatU":case"repeatV":case"offsetU":case"offsetV":t.technique[n.nodeName]=parseFloat(n.textContent);break;case"wrapU":case"wrapV":"TRUE"===n.textContent.toUpperCase()?t.technique[n.nodeName]=1:"FALSE"===n.textContent.toUpperCase()?t.technique[n.nodeName]=0:t.technique[n.nodeName]=parseInt(n.textContent);break}}}function ae(e){for(var t={},r=0,a=e.childNodes.length;r<a;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"technique":t.technique=ne(n);break}}return t}function ne(e){for(var t={},r=0,a=e.childNodes.length;r<a;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"double_sided":t[n.nodeName]=parseInt(n.textContent);break}}return t}function ie(e){return e}function se(e){return v(_t.effects[e],ie)}function oe(e){for(var t={name:e.getAttribute("name")},r=0,a=e.childNodes.length;r<a;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"instance_effect":t.url=c(n.getAttribute("url"));break}}_t.materials[e.getAttribute("id")]=t}function ce(e){var t,r=e.slice(2+(e.lastIndexOf(".")-1>>>0));switch(r=r.toLowerCase(),r){case"tga":t=Nt;break;default:t=At}return t}function le(e){var t,r=se(e.url),n=r.profile.technique,i=r.profile.extra;switch(n.type){case"phong":case"blinn":t=new a["eb"];break;case"lambert":t=new a["db"];break;default:t=new a["bb"];break}function s(e){var t=r.profile.samplers[e.id],n=null;if(void 0!==t){var i=r.profile.surfaces[t.source];n=J(i.init_from)}else console.warn("THREE.ColladaLoader: Undefined sampler. Access image directly (see #12530)."),n=J(e.id);if(null!==n){var s=ce(n);if(void 0!==s){var o=s.load(n),c=e.extra;if(void 0!==c&&void 0!==c.technique&&!1===d(c.technique)){var l=c.technique;o.wrapS=l.wrapU?a["Ib"]:a["m"],o.wrapT=l.wrapV?a["Ib"]:a["m"],o.offset.set(l.offsetU||0,l.offsetV||0),o.repeat.set(l.repeatU||1,l.repeatV||1)}else o.wrapS=a["Ib"],o.wrapT=a["Ib"];return o}return console.warn("THREE.ColladaLoader: Loader for texture %s not found.",n),null}return console.warn("THREE.ColladaLoader: Couldn't create texture with ID:",e.id),null}t.name=e.name||"";var o=n.parameters;for(var c in o){var l=o[c];switch(c){case"diffuse":l.color&&t.color.fromArray(l.color),l.texture&&(t.map=s(l.texture));break;case"specular":l.color&&t.specular&&t.specular.fromArray(l.color),l.texture&&(t.specularMap=s(l.texture));break;case"bump":l.texture&&(t.normalMap=s(l.texture));break;case"ambient":l.texture&&(t.lightMap=s(l.texture));break;case"shininess":l.float&&t.shininess&&(t.shininess=l.float);break;case"emission":l.color&&t.emissive&&t.emissive.fromArray(l.color),l.texture&&(t.emissiveMap=s(l.texture));break}}var u=o["transparent"],f=o["transparency"];if(void 0===f&&u&&(f={float:1}),void 0===u&&f&&(u={opaque:"A_ONE",data:{color:[1,1,1,1]}}),u&&f)if(u.data.texture)t.transparent=!0;else{var h=u.data.color;switch(u.opaque){case"A_ONE":t.opacity=h[3]*f.float;break;case"RGB_ZERO":t.opacity=1-h[0]*f.float;break;case"A_ZERO":t.opacity=1-h[3]*f.float;break;case"RGB_ONE":t.opacity=h[0]*f.float;break;default:console.warn('THREE.ColladaLoader: Invalid opaque type "%s" of transparent tag.',u.opaque)}t.opacity<1&&(t.transparent=!0)}return void 0!==i&&void 0!==i.technique&&1===i.technique.double_sided&&(t.side=a["u"]),t}function de(e){return v(_t.materials[e],le)}function ue(e){for(var t={name:e.getAttribute("name")},r=0,a=e.childNodes.length;r<a;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"optics":t.optics=fe(n);break}}_t.cameras[e.getAttribute("id")]=t}function fe(e){for(var t=0;t<e.childNodes.length;t++){var r=e.childNodes[t];switch(r.nodeName){case"technique_common":return he(r)}}return{}}function he(e){for(var t={},r=0;r<e.childNodes.length;r++){var a=e.childNodes[r];switch(a.nodeName){case"perspective":case"orthographic":t.technique=a.nodeName,t.parameters=pe(a);break}}return t}function pe(e){for(var t={},r=0;r<e.childNodes.length;r++){var a=e.childNodes[r];switch(a.nodeName){case"xfov":case"yfov":case"xmag":case"ymag":case"znear":case"zfar":case"aspect_ratio":t[a.nodeName]=parseFloat(a.textContent);break}}return t}function me(e){var t;switch(e.optics.technique){case"perspective":t=new a["sb"](e.optics.parameters.yfov,e.optics.parameters.aspect_ratio,e.optics.parameters.znear,e.optics.parameters.zfar);break;case"orthographic":var r=e.optics.parameters.ymag,n=e.optics.parameters.xmag,i=e.optics.parameters.aspect_ratio;n=void 0===n?r*i:n,r=void 0===r?n/i:r,n*=.5,r*=.5,t=new a["pb"](-n,n,r,-r,e.optics.parameters.znear,e.optics.parameters.zfar);break;default:t=new a["sb"];break}return t.name=e.name||"",t}function ve(e){var t=_t.cameras[e];return void 0!==t?v(t,me):(console.warn("THREE.ColladaLoader: Couldn't find camera with ID:",e),null)}function be(e){for(var t={},r=0,a=e.childNodes.length;r<a;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"technique_common":t=ge(n);break}}_t.lights[e.getAttribute("id")]=t}function ge(e){for(var t={},r=0,a=e.childNodes.length;r<a;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"directional":case"point":case"spot":case"ambient":t.technique=n.nodeName,t.parameters=ye(n)}}return t}function ye(e){for(var t={},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"color":var o=s(i.textContent);t.color=(new a["o"]).fromArray(o);break;case"falloff_angle":t.falloffAngle=parseFloat(i.textContent);break;case"quadratic_attenuation":var c=parseFloat(i.textContent);t.distance=c?Math.sqrt(1/c):0;break}}return t}function we(e){var t;switch(e.technique){case"directional":t=new a["s"];break;case"point":t=new a["ub"];break;case"spot":t=new a["Qb"];break;case"ambient":t=new a["b"];break}return e.parameters.color&&t.color.copy(e.parameters.color),e.parameters.distance&&(t.distance=e.parameters.distance),t}function ke(e){var t=_t.lights[e];return void 0!==t?v(t,we):(console.warn("THREE.ColladaLoader: Couldn't find light with ID:",e),null)}function Ne(e){var t={name:e.getAttribute("name"),sources:{},vertices:{},primitives:[]},a=r(e,"mesh")[0];if(void 0!==a){for(var n=0;n<a.childNodes.length;n++){var i=a.childNodes[n];if(1===i.nodeType){var s=i.getAttribute("id");switch(i.nodeName){case"source":t.sources[s]=xe(i);break;case"vertices":t.vertices=Ae(i);break;case"polygons":console.warn("THREE.ColladaLoader: Unsupported primitive type: ",i.nodeName);break;case"lines":case"linestrips":case"polylist":case"triangles":t.primitives.push(Te(i));break;default:console.log(i)}}}_t.geometries[e.getAttribute("id")]=t}}function xe(e){for(var t={array:[],stride:3},a=0;a<e.childNodes.length;a++){var n=e.childNodes[a];if(1===n.nodeType)switch(n.nodeName){case"float_array":t.array=s(n.textContent);break;case"Name_array":t.array=i(n.textContent);break;case"technique_common":var o=r(n,"accessor")[0];void 0!==o&&(t.stride=parseInt(o.getAttribute("stride")));break}}return t}function Ae(e){for(var t={},r=0;r<e.childNodes.length;r++){var a=e.childNodes[r];1===a.nodeType&&(t[a.getAttribute("semantic")]=c(a.getAttribute("source")))}return t}function Te(e){for(var t={type:e.nodeName,material:e.getAttribute("material"),count:parseInt(e.getAttribute("count")),inputs:{},stride:0,hasUV:!1},r=0,a=e.childNodes.length;r<a;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"input":var i=c(n.getAttribute("source")),s=n.getAttribute("semantic"),l=parseInt(n.getAttribute("offset")),d=parseInt(n.getAttribute("set")),u=d>0?s+d:s;t.inputs[u]={id:i,offset:l},t.stride=Math.max(t.stride,l+1),"TEXCOORD"===s&&(t.hasUV=!0);break;case"vcount":t.vcount=o(n.textContent);break;case"p":t.p=o(n.textContent);break}}return t}function Ee(e){for(var t={},r=0;r<e.length;r++){var a=e[r];void 0===t[a.type]&&(t[a.type]=[]),t[a.type].push(a)}return t}function Ce(e){for(var t=0,r=0,a=e.length;r<a;r++){var n=e[r];!0===n.hasUV&&t++}t>0&&t<e.length&&(e.uvsNeedsFix=!0)}function _e(e){var t={},r=e.sources,a=e.vertices,n=e.primitives;if(0===n.length)return{};var i=Ee(n);for(var s in i){var o=i[s];Ce(o),t[s]=Le(o,r,a)}return t}function Le(e,t,r){for(var n={},i={array:[],stride:0},s={array:[],stride:0},o={array:[],stride:0},c={array:[],stride:0},l={array:[],stride:0},d={array:[],stride:4},u={array:[],stride:4},f=new a["j"],h=[],p=0,m=0;m<e.length;m++){var v=e[m],b=v.inputs,g=0;switch(v.type){case"lines":case"linestrips":g=2*v.count;break;case"triangles":g=3*v.count;break;case"polylist":for(var y=0;y<v.count;y++){var w=v.vcount[y];switch(w){case 3:g+=3;break;case 4:g+=6;break;default:g+=3*(w-2);break}}break;default:console.warn("THREE.ColladaLoader: Unknow primitive type:",v.type)}for(var k in f.addGroup(p,g,m),p+=g,v.material&&h.push(v.material),b){var N=b[k];switch(k){case"VERTEX":for(var x in r){var A=r[x];switch(x){case"POSITION":var T=i.array.length;if(je(v,t[A],N.offset,i.array),i.stride=t[A].stride,t.skinWeights&&t.skinIndices&&(je(v,t.skinIndices,N.offset,d.array),je(v,t.skinWeights,N.offset,u.array)),!1===v.hasUV&&!0===e.uvsNeedsFix){g=(i.array.length-T)/i.stride;for(var E=0;E<g;E++)o.array.push(0,0)}break;case"NORMAL":je(v,t[A],N.offset,s.array),s.stride=t[A].stride;break;case"COLOR":je(v,t[A],N.offset,l.array),l.stride=t[A].stride;break;case"TEXCOORD":je(v,t[A],N.offset,o.array),o.stride=t[A].stride;break;case"TEXCOORD1":je(v,t[A],N.offset,c.array),o.stride=t[A].stride;break;default:console.warn('THREE.ColladaLoader: Semantic "%s" not handled in geometry build process.',x)}}break;case"NORMAL":je(v,t[N.id],N.offset,s.array),s.stride=t[N.id].stride;break;case"COLOR":je(v,t[N.id],N.offset,l.array),l.stride=t[N.id].stride;break;case"TEXCOORD":je(v,t[N.id],N.offset,o.array),o.stride=t[N.id].stride;break;case"TEXCOORD1":je(v,t[N.id],N.offset,c.array),c.stride=t[N.id].stride;break}}}return i.array.length>0&&f.setAttribute("position",new a["z"](i.array,i.stride)),s.array.length>0&&f.setAttribute("normal",new a["z"](s.array,s.stride)),l.array.length>0&&f.setAttribute("color",new a["z"](l.array,l.stride)),o.array.length>0&&f.setAttribute("uv",new a["z"](o.array,o.stride)),c.array.length>0&&f.setAttribute("uv2",new a["z"](c.array,c.stride)),d.array.length>0&&f.setAttribute("skinIndex",new a["z"](d.array,d.stride)),u.array.length>0&&f.setAttribute("skinWeight",new a["z"](u.array,u.stride)),n.data=f,n.type=e[0].type,n.materialKeys=h,n}function je(e,t,r,a){var n=e.p,i=e.stride,s=e.vcount;function o(e){for(var t=n[e+r]*l,i=t+l;t<i;t++)a.push(c[t])}var c=t.array,l=t.stride;if(void 0!==e.vcount)for(var d=0,u=0,f=s.length;u<f;u++){var h=s[u];if(4===h){var p=d+0*i,m=d+1*i,v=d+2*i,b=d+3*i;o(p),o(m),o(b),o(m),o(v),o(b)}else if(3===h){p=d+0*i,m=d+1*i,v=d+2*i;o(p),o(m),o(v)}else if(h>4)for(var g=1,y=h-2;g<=y;g++){p=d+0*i,m=d+i*g,v=d+i*(g+1);o(p),o(m),o(v)}d+=i*h}else for(u=0,f=n.length;u<f;u+=i)o(u)}function Re(e){return v(_t.geometries[e],_e)}function Oe(e){for(var t={name:e.getAttribute("name")||"",joints:{},links:[]},r=0;r<e.childNodes.length;r++){var a=e.childNodes[r];if(1===a.nodeType)switch(a.nodeName){case"technique_common":Se(a,t);break}}_t.kinematicsModels[e.getAttribute("id")]=t}function He(e){return void 0!==e.build?e.build:e}function Ie(e){return v(_t.kinematicsModels[e],He)}function Se(e,t){for(var r=0;r<e.childNodes.length;r++){var a=e.childNodes[r];if(1===a.nodeType)switch(a.nodeName){case"joint":t.joints[a.getAttribute("sid")]=ze(a);break;case"link":t.links.push(Pe(a));break}}}function ze(e){for(var t,r=0;r<e.childNodes.length;r++){var a=e.childNodes[r];if(1===a.nodeType)switch(a.nodeName){case"prismatic":case"revolute":t=Me(a);break}}return t}function Me(e,t){t={sid:e.getAttribute("sid"),name:e.getAttribute("name")||"",axis:new a["cc"],limits:{min:0,max:0},type:e.nodeName,static:!1,zeroPosition:0,middlePosition:0};for(var r=0;r<e.childNodes.length;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"axis":var i=s(n.textContent);t.axis.fromArray(i);break;case"limits":var o=n.getElementsByTagName("max")[0],c=n.getElementsByTagName("min")[0];t.limits.max=parseFloat(o.textContent),t.limits.min=parseFloat(c.textContent);break}}return t.limits.min>=t.limits.max&&(t.static=!0),t.middlePosition=(t.limits.min+t.limits.max)/2,t}function Pe(e){for(var t={sid:e.getAttribute("sid"),name:e.getAttribute("name")||"",attachments:[],transforms:[]},r=0;r<e.childNodes.length;r++){var a=e.childNodes[r];if(1===a.nodeType)switch(a.nodeName){case"attachment_full":t.attachments.push(De(a));break;case"matrix":case"translate":case"rotate":t.transforms.push(qe(a));break}}return t}function De(e){for(var t={joint:e.getAttribute("joint").split("/").pop(),transforms:[],links:[]},r=0;r<e.childNodes.length;r++){var a=e.childNodes[r];if(1===a.nodeType)switch(a.nodeName){case"link":t.links.push(Pe(a));break;case"matrix":case"translate":case"rotate":t.transforms.push(qe(a));break}}return t}function qe(e){var t={type:e.nodeName},r=s(e.textContent);switch(t.type){case"matrix":t.obj=new a["Z"],t.obj.fromArray(r).transpose();break;case"translate":t.obj=new a["cc"],t.obj.fromArray(r);break;case"rotate":t.obj=new a["cc"],t.obj.fromArray(r),t.angle=a["Y"].degToRad(r[3]);break}return t}function Ue(e){for(var t={name:e.getAttribute("name")||"",rigidBodies:{}},r=0;r<e.childNodes.length;r++){var a=e.childNodes[r];if(1===a.nodeType)switch(a.nodeName){case"rigid_body":t.rigidBodies[a.getAttribute("name")]={},Fe(a,t.rigidBodies[a.getAttribute("name")]);break}}_t.physicsModels[e.getAttribute("id")]=t}function Fe(e,t){for(var r=0;r<e.childNodes.length;r++){var a=e.childNodes[r];if(1===a.nodeType)switch(a.nodeName){case"technique_common":Ge(a,t);break}}}function Ge(e,t){for(var r=0;r<e.childNodes.length;r++){var a=e.childNodes[r];if(1===a.nodeType)switch(a.nodeName){case"inertia":t.inertia=s(a.textContent);break;case"mass":t.mass=s(a.textContent)[0];break}}}function Be(e){for(var t={bindJointAxis:[]},r=0;r<e.childNodes.length;r++){var a=e.childNodes[r];if(1===a.nodeType)switch(a.nodeName){case"bind_joint_axis":t.bindJointAxis.push(Je(a));break}}_t.kinematicsScenes[c(e.getAttribute("url"))]=t}function Je(e){for(var t={target:e.getAttribute("target").split("/").pop()},r=0;r<e.childNodes.length;r++){var a=e.childNodes[r];if(1===a.nodeType)switch(a.nodeName){case"axis":var n=a.getElementsByTagName("param")[0];t.axis=n.textContent;var i=t.axis.split("inst_").pop().split("axis")[0];t.jointIndex=i.substr(0,i.length-1);break}}return t}function Ve(e){return void 0!==e.build?e.build:e}function Ze(e){return v(_t.kinematicsScenes[e],Ve)}function We(){var e=Object.keys(_t.kinematicsModels)[0],t=Object.keys(_t.kinematicsScenes)[0],r=Object.keys(_t.visualScenes)[0];if(void 0!==e&&void 0!==t){for(var n=Ie(e),i=Ze(t),s=ft(r),o=i.bindJointAxis,c={},l=0,d=o.length;l<d;l++){var u=o[l],f=bt.querySelector('[sid="'+u.target+'"]');if(f){var h=f.parentElement;m(u.jointIndex,h)}}var p=new a["Z"];Et={joints:n&&n.joints,getJointValue:function(e){var t=c[e];if(t)return t.position;console.warn("THREE.ColladaLoader: Joint "+e+" doesn't exist.")},setJointValue:function(e,t){var r=c[e];if(r){var n=r.joint;if(t>n.limits.max||t<n.limits.min)console.warn("THREE.ColladaLoader: Joint "+e+" value "+t+" outside of limits (min: "+n.limits.min+", max: "+n.limits.max+").");else if(n.static)console.warn("THREE.ColladaLoader: Joint "+e+" is static.");else{var i=r.object,s=n.axis,o=r.transforms;$e.identity();for(var l=0;l<o.length;l++){var d=o[l];if(d.sid&&-1!==d.sid.indexOf(e))switch(n.type){case"revolute":$e.multiply(p.makeRotationAxis(s,a["Y"].degToRad(t)));break;case"prismatic":$e.multiply(p.makeTranslation(s.x*t,s.y*t,s.z*t));break;default:console.warn("THREE.ColladaLoader: Unknown joint type: "+n.type);break}else switch(d.type){case"matrix":$e.multiply(d.obj);break;case"translate":$e.multiply(p.makeTranslation(d.obj.x,d.obj.y,d.obj.z));break;case"scale":$e.scale(d.obj);break;case"rotate":$e.multiply(p.makeRotationAxis(d.obj,d.angle));break}}i.matrix.copy($e),i.matrix.decompose(i.position,i.quaternion,i.scale),c[e].position=t}}else console.log("THREE.ColladaLoader: "+e+" does not exist.")}}}function m(e,t){var r=t.getAttribute("name"),a=n.joints[e];s.traverse((function(n){n.name===r&&(c[e]={object:n,transforms:Xe(t),joint:a,position:a.zeroPosition})}))}}function Xe(e){for(var t=[],r=bt.querySelector('[id="'+e.id+'"]'),n=0;n<r.childNodes.length;n++){var i=r.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"matrix":var o=s(i.textContent),c=(new a["Z"]).fromArray(o).transpose();t.push({sid:i.getAttribute("sid"),type:i.nodeName,obj:c});break;case"translate":case"scale":o=s(i.textContent);var l=(new a["cc"]).fromArray(o);t.push({sid:i.getAttribute("sid"),type:i.nodeName,obj:l});break;case"rotate":o=s(i.textContent),l=(new a["cc"]).fromArray(o);var d=a["Y"].degToRad(o[3]);t.push({sid:i.getAttribute("sid"),type:i.nodeName,obj:l,angle:d});break}}return t}function Ye(e){for(var t=e.getElementsByTagName("node"),r=0;r<t.length;r++){var a=t[r];!1===a.hasAttribute("id")&&a.setAttribute("id",l())}}var $e=new a["Z"],Ke=new a["cc"];function Qe(e){for(var t={name:e.getAttribute("name")||"",type:e.getAttribute("type"),id:e.getAttribute("id"),sid:e.getAttribute("sid"),matrix:new a["Z"],nodes:[],instanceCameras:[],instanceControllers:[],instanceLights:[],instanceGeometries:[],instanceNodes:[],transforms:{}},r=0;r<e.childNodes.length;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"node":t.nodes.push(n.getAttribute("id")),Qe(n);break;case"instance_camera":t.instanceCameras.push(c(n.getAttribute("url")));break;case"instance_controller":t.instanceControllers.push(et(n));break;case"instance_light":t.instanceLights.push(c(n.getAttribute("url")));break;case"instance_geometry":t.instanceGeometries.push(et(n));break;case"instance_node":t.instanceNodes.push(c(n.getAttribute("url")));break;case"matrix":var i=s(n.textContent);t.matrix.multiply($e.fromArray(i).transpose()),t.transforms[n.getAttribute("sid")]=n.nodeName;break;case"translate":i=s(n.textContent);Ke.fromArray(i),t.matrix.multiply($e.makeTranslation(Ke.x,Ke.y,Ke.z)),t.transforms[n.getAttribute("sid")]=n.nodeName;break;case"rotate":i=s(n.textContent);var o=a["Y"].degToRad(i[3]);t.matrix.multiply($e.makeRotationAxis(Ke.fromArray(i),o)),t.transforms[n.getAttribute("sid")]=n.nodeName;break;case"scale":i=s(n.textContent);t.matrix.scale(Ke.fromArray(i)),t.transforms[n.getAttribute("sid")]=n.nodeName;break;case"extra":break;default:console.log(n)}}return ot(t.id)?console.warn("THREE.ColladaLoader: There is already a node with ID %s. Exclude current node from further processing.",t.id):_t.nodes[t.id]=t,t}function et(e){for(var t={id:c(e.getAttribute("url")),materials:{},skeletons:[]},r=0;r<e.childNodes.length;r++){var a=e.childNodes[r];switch(a.nodeName){case"bind_material":for(var n=a.getElementsByTagName("instance_material"),i=0;i<n.length;i++){var s=n[i],o=s.getAttribute("symbol"),l=s.getAttribute("target");t.materials[o]=c(l)}break;case"skeleton":t.skeletons.push(c(a.textContent));break;default:break}}return t}function tt(e,t){var r,n,i=[],s=[];for(r=0;r<e.length;r++){var o=e[r];if(ot(o))f=ct(o),rt(f,t,i);else if(ut(o))for(var c=_t.visualScenes[o],l=c.children,d=0;d<l.length;d++){var u=l[d];if("JOINT"===u.type){var f=ct(u.id);rt(f,t,i)}}else console.error("THREE.ColladaLoader: Unable to find root bone of skeleton with ID:",o)}for(r=0;r<t.length;r++)for(d=0;d<i.length;d++)if(n=i[d],n.bone.name===t[r].name){s[r]=n,n.processed=!0;break}for(r=0;r<i.length;r++)n=i[r],!1===n.processed&&(s.push(n),n.processed=!0);var h=[],p=[];for(r=0;r<s.length;r++)n=s[r],h.push(n.bone),p.push(n.boneInverse);return new a["Lb"](h,p)}function rt(e,t,r){e.traverse((function(e){if(!0===e.isBone){for(var n,i=0;i<t.length;i++){var s=t[i];if(s.name===e.name){n=s.boneInverse;break}}void 0===n&&(n=new a["Z"]),r.push({bone:e,boneInverse:n,processed:!1})}}))}function at(e){for(var t=[],r=e.matrix,n=e.nodes,i=e.type,s=e.instanceCameras,o=e.instanceControllers,c=e.instanceLights,l=e.instanceGeometries,d=e.instanceNodes,u=0,f=n.length;u<f;u++)t.push(ct(n[u]));for(u=0,f=s.length;u<f;u++){var h=ve(s[u]);null!==h&&t.push(h.clone())}for(u=0,f=o.length;u<f;u++)for(var p=o[u],m=F(p.id),v=Re(m.id),b=st(v,p.materials),g=p.skeletons,y=m.skin.joints,w=tt(g,y),k=0,N=b.length;k<N;k++){var x=b[k];x.isSkinnedMesh&&(x.bind(w,m.skin.bindMatrix),x.normalizeSkinWeights()),t.push(x)}for(u=0,f=c.length;u<f;u++){var A=ke(c[u]);null!==A&&t.push(A.clone())}for(u=0,f=l.length;u<f;u++)for(p=l[u],v=Re(p.id),b=st(v,p.materials),k=0,N=b.length;k<N;k++)t.push(b[k]);for(u=0,f=d.length;u<f;u++)t.push(ct(d[u]).clone());if(0===n.length&&1===t.length)x=t[0];else{x="JOINT"===i?new a["e"]:new a["E"];for(u=0;u<t.length;u++)x.add(t[u])}return""===x.name&&(x.name="JOINT"===i?e.sid:e.name),x.matrix.copy(r),x.matrix.decompose(x.position,x.quaternion,x.scale),x}var nt=new a["bb"]({color:16711935});function it(e,t){for(var r=[],a=0,n=e.length;a<n;a++){var i=t[e[a]];void 0===i?(console.warn("THREE.ColladaLoader: Material with key %s not found. Apply fallback material.",e[a]),r.push(nt)):r.push(de(i))}return r}function st(e,t){var r=[];for(var n in e){var i=e[n],s=it(i.materialKeys,t);0===s.length&&("lines"===n||"linestrips"===n?s.push(new a["M"]):s.push(new a["eb"]));var o=void 0!==i.data.attributes.skinIndex;if(o)for(var c=0,l=s.length;c<l;c++)s[c].skinning=!0;var d,u=1===s.length?s[0]:s;switch(n){case"lines":d=new a["O"](i.data,u);break;case"linestrips":d=new a["L"](i.data,u);break;case"triangles":case"polylist":d=o?new a["Mb"](i.data,u):new a["ab"](i.data,u);break}r.push(d)}return r}function ot(e){return void 0!==_t.nodes[e]}function ct(e){return v(_t.nodes[e],at)}function lt(e){var t={name:e.getAttribute("name"),children:[]};Ye(e);for(var a=r(e,"node"),n=0;n<a.length;n++)t.children.push(Qe(a[n]));_t.visualScenes[e.getAttribute("id")]=t}function dt(e){var t=new a["E"];t.name=e.name;for(var r=e.children,n=0;n<r.length;n++){var i=r[n];t.add(ct(i.id))}return t}function ut(e){return void 0!==_t.visualScenes[e]}function ft(e){return v(_t.visualScenes[e],dt)}function ht(e){var t=r(e,"instance_visual_scene")[0];return ft(c(t.getAttribute("url")))}function pt(){var e=_t.clips;if(!0===d(e)){if(!1===d(_t.animations)){var t=[];for(var r in _t.animations)for(var n=k(r),i=0,s=n.length;i<s;i++)t.push(n[i]);Tt.push(new a["c"]("default",-1,t))}}else for(var r in e)Tt.push(S(r))}function mt(e){var t="",r=[e];while(r.length){var a=r.shift();a.nodeType===Node.TEXT_NODE?t+=a.textContent:(t+="\n",r.push.apply(r,a.childNodes))}return t.trim()}if(0===e.length)return{scene:new a["Jb"]};var vt=(new DOMParser).parseFromString(e,"application/xml"),bt=r(vt,"COLLADA")[0],gt=vt.getElementsByTagName("parsererror")[0];if(void 0!==gt){var yt,wt=r(gt,"div")[0];return yt=wt?wt.textContent:mt(gt),console.error("THREE.ColladaLoader: Failed to parse collada file.\n",yt),null}var kt=bt.getAttribute("version");console.log("THREE.ColladaLoader: File version",kt);var Nt,xt=u(r(bt,"asset")[0]),At=new a["Ub"](this.manager);At.setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin),n&&(Nt=new n(this.manager),Nt.setPath(this.resourcePath||t));var Tt=[],Et={},Ct=0,_t={animations:{},clips:{},controllers:{},images:{},effects:{},materials:{},cameras:{},lights:{},geometries:{},nodes:{},visualScenes:{},kinematicsModels:{},physicsModels:{},kinematicsScenes:{}};p(bt,"library_animations","animation",b),p(bt,"library_animation_clips","animation_clip",H),p(bt,"library_controllers","controller",z),p(bt,"library_images","image",G),p(bt,"library_effects","effect",V),p(bt,"library_materials","material",oe),p(bt,"library_cameras","camera",ue),p(bt,"library_lights","light",be),p(bt,"library_geometries","geometry",Ne),p(bt,"library_nodes","node",Qe),p(bt,"library_visual_scenes","visual_scene",lt),p(bt,"library_kinematics_models","kinematics_model",Oe),p(bt,"library_physics_models","physics_model",Ue),p(bt,"scene","instance_kinematics_scene",Be),m(_t.animations,w),m(_t.clips,I),m(_t.controllers,q),m(_t.images,B),m(_t.effects,ie),m(_t.materials,le),m(_t.cameras,me),m(_t.lights,we),m(_t.geometries,_e),m(_t.visualScenes,dt),pt(),We();var Lt=ht(r(bt,"scene")[0]);return"Z_UP"===xt.upAxis&&Lt.quaternion.setFromEuler(new a["w"](-Math.PI/2,0,0)),Lt.scale.multiplyScalar(xt.unit),{animations:Tt,kinematics:Et,library:_t,scene:Lt}}});t["default"]=function(e){return{init:function(){this.create()},create:function(t){e.colladaLoader=new i},load:function(t,r,a,n){e.colladaLoader.load(t,r,a,n)}}}},d90f:function(e,t,r){"use strict";var a=function(){var e=this,t=e._self._c;return t("div",{ref:"three",staticClass:"three",style:{width:e.width,height:e.height},attrs:{id:e.threeId}},[t("div",{staticClass:"stats",attrs:{id:e.statsId}})])},n=[],i=r("558f"),s=null,o={name:"three",components:{},props:{threeId:{type:String,default:"$_three"},statsId:{type:String,default:"$_stats"},width:{type:String,default:"500px"},height:{type:String,default:"300px"}},data:function(){return{}},computed:{},watch:{},created:function(){},mounted:function(){this.initThree()},beforeDestroy:function(){this.clearThree()},methods:{initThree:function(){s||(s=new i["default"](this.threeId,this.statsId)),this.$emit("loader-modules",s)},clearThree:function(){s.clearThree(),s=null}}},c=o,l=(r("802e"),r("2877")),d=Object(l["a"])(c,a,n,!1,null,"2e015c11",null),u=d.exports;t["a"]=u},e13c:function(e,t,r){},eb36:function(e,t,r){"use strict";r.r(t);var a=r("5a89");t["default"]=function(e){return{init:function(){this.create()},create:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.scene=new a["Jb"](t),e.scene.background=new a["o"](13300735)}}}}}]);